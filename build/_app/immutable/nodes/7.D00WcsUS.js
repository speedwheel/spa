import"../chunks/disclose-version.Bg9kRutz.js";import{p as B,an as g,f as X,a as U,N as c,a1 as l,c as p,s as d,r as u,Q as Y,I as F,P as H}from"../chunks/runtime.CkwxRJfy.js";import{i as Z}from"../chunks/lifecycle.BA9omkAW.js";import{s as ee,a as ae}from"../chunks/store.Bsq8KBLz.js";import{p as te}from"../chunks/stores.DT1Wf4dz.js";import{d as se,a as N,t as re}from"../chunks/template.2ssBT80h.js";import{i as oe}from"../chunks/this.CNBkEazd.js";import{a as r}from"../chunks/props.BStxs2hE.js";import{p as ie,P as le,M as de,T as ne,a as ce,b as pe,c as O,D as ue}from"../chunks/TaskFilter.41h65F7v.js";import{I as S,b as ve,T as me,H as be}from"../chunks/Icon.C6CKc0gy.js";import{g as fe,w as ge,a as Q,o as ke}from"../chunks/watch.svelte.CuXRciTq.js";import{g as _e}from"../chunks/entry.Rxd7cn-b.js";const he=m=>m.charAt(0).toUpperCase()+m.toLowerCase().slice(1);var De=re('<div class="flex"><div class="max-h-[80vh] flex-1 overflow-y-auto p-4 md:p-6"><!> <!></div> <div class="w-52 bg-neutral-800 p-4"><button type="button" class="mb-6 flex w-full items-center justify-center gap-2 rounded-md bg-accent-purple-1 py-1 font-medium dark:text-white"><!> Start</button> <div class="mb-4 border-b border-dashed border-b-neutral-700 pb-4"><div class="mb-2 text-xs dark:text-neutral-400">Priority</div> <!></div> <div class="mb-4 border-b border-dashed border-b-neutral-700 pb-4"><div class="mb-2 text-xs dark:text-neutral-400">Label</div> <!></div> <div class="mb-4 border-b border-dashed border-b-neutral-700 pb-4"><div class="mb-2 text-xs dark:text-neutral-400">Project</div> <!></div> <div><div class="mb-2 text-xs dark:text-neutral-400">Date</div> <div class="tickup-datepicker [&amp;_input]:!w-full"><!></div></div></div></div>');function Te(m,h){B(h,!0);const D=(t,a=F)=>{var e=H(()=>`size-4 text-${a().color}`);S(t,{src:me,get class(){return c(e)}})},T=(t,a=F)=>{var e=H(()=>`size-4 text-${a().color}`);S(t,{src:be,get class(){return c(e)}})};let v=g(""),x=g(""),$=g(r(ie[1])),w=g(null),y=g(null),j=g(r(new Date));const i=fe(),n=Q();ge([()=>n.editTaskID,()=>i.tasks.isLoading],([t,a])=>{if(!t||a)return;const e=i.getTask(t);if(e){if(l(v,r(e.name)),l(x,r(e.description)),l($,r({label:he(e.priority),value:e.priority,color:le[e.priority]})),e.label_id){const s=i.labels.labels.data[e.label_id];s&&l(w,r({label:s.name,value:s.id,color:s.color}))}if(e.project_id){const s=i.projects.projects.data[e.project_id];s&&l(y,r({label:s.name,value:s.id,color:s.color}))}e.panel_date&&l(j,r(new Date(e.panel_date)))}});function q(){_e("/")}function b(t,a){var e,s,f,k,_;a=a??t.detail.type,a==="label"?i.updateTask(n.editTaskID,{label_id:(e=t.detail)==null?void 0:e.value}):a==="project"?i.updateTask(n.editTaskID,{project_id:(s=t.detail)==null?void 0:s.value}):a==="priority"?i.updateTask(n.editTaskID,{priority:(f=t.detail)==null?void 0:f.value}):a==="panel_date"?i.updateTask(n.editTaskID,{panel_date:ke(t.detail)}):a==="name"?i.updateTask(n.editTaskID,{name:(k=t.detail)==null?void 0:k.value}):a==="description"&&i.updateTask(n.editTaskID,{description:(_=t.detail)==null?void 0:_.value})}var z=se(),G=X(z);oe(G,()=>c(v),t=>{de(t,{title:"Edit task",get open(){return n.isOpenEditTask},set open(a){n.isOpenEditTask=a},outsideclose:!0,size:"lg",backdropClass:"fixed inset-0 z-40 dark:bg-neutral-700 bg-opacity-50 dark:bg-opacity-70",classBody:"dark:bg-neutral-900 !p-0 ",classFooter:"dark:bg-neutral-900",classHeader:"dark:bg-neutral-900 dark:text-neutral-100 [&_button:hover]:dark:!bg-neutral-700",classDialog:"[&_.dark\\:divide-gray-700]:!divide-neutral-700",$$events:{close:q},children:(a,e)=>{var s=De(),f=p(s),k=p(f);ne(k,{get value(){return c(v)},set value(o){l(v,r(o))},delay:300,$$events:{update:b}});var _=d(k,2);ce(_,{get value(){return c(x)},set value(o){l(x,r(o))},$$events:{update:b}}),u(f);var E=d(f,2),I=p(E),J=p(I);S(J,{src:ve,mini:!0,class:"size-5 text-white"}),Y(),u(I);var P=d(I,2),K=d(p(P),2);pe(K,{get value(){return c($)},set value(o){l($,r(o))},class:"!w-full",showChevron:!0,$$events:{change:b}}),u(P);var C=d(P,2),R=d(p(C),2);O(R,{get value(){return c(w)},set value(o){l(w,r(o))},get items(){return i.labels.labelsDropdown},placeholder:"Labels",icon:D,class:"!w-full",showChevron:!0,type:"label",$$events:{change:b}}),u(C);var L=d(C,2),V=d(p(L),2);O(V,{get value(){return c(y)},set value(o){l(y,r(o))},get items(){return i.projects.projectsDropdown},placeholder:"Projects",icon:T,class:"!w-full",showChevron:!0,type:"project",$$events:{change:b}}),u(L);var M=d(L,2),A=d(p(M),2),W=p(A);ue(W,{get value(){return c(j)},set value(o){l(j,r(o))},dateFormat:{year:"2-digit",month:"short",day:"2-digit"},defaultDate:new Date,autohide:!0,showActionButtons:!0,$$events:{select:o=>{b(o,"panel_date")}}}),u(A),u(M),u(E),u(s),N(a,s)},$$slots:{default:!0}})}),N(m,z),U()}function Me(m,h){B(h,!1);const D=ee(),T=()=>ae(te,"$page",D),v=Q();v.editTaskID=T().params.task_id,v.editTaskID&&(v.isOpenEditTask=!0),Z(),Te(m,{}),U()}export{Me as component};
